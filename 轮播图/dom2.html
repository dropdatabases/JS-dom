<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>轮播图</title>
  <style>
  	  *{
  	  	margin:0;
  	  	padding: 0;
  	  }
  	  body{
  	  	user-select: none;
  	  	/*用户是否可以选中文字*/
  	  }
  	  .banner{
  	  	overflow: hidden;
  	  	position: relative;
  	  	width:590px;
  	  	height:470px;
  	  	margin: 50px auto 0;
  	  }
  	  .ImgList{
  	  	position: absolute;
  	  	list-style-type: none;
  	  	width: 1100%;
  	  }
  	  .ImgList li{
  	  	float: left;
  	  }
  	  .ImgList li img{
  	  	display: block;
  	  }
  	  .ImgList::after{
  	  	content: '';
  	  	display: block;
  	  	clear: both;
  	  	visibility: hidden;
  	  	height: 0;
  	  }
  	  .btn_left,.btn_right{
  	  	position: absolute;
  	  	top: 0;
  	  	bottom:0;
  	  	width:50px;
  	  	height:70px;
  	  	margin: auto;
  	  	background-color: rgba(0,0,0,.3);
  	  	color: #fff;
  	  	text-align: center;
  	  	line-height: 70px;
  	  	font-size: 30px;
  	  	cursor: pointer;
  	  }
  	  .btn_right{
  	  	right: 0;
  	  }
  	  #bottom{
  	  	position: absolute;
  	  	left: 0;
  	  	right: 0;
  	  	bottom:30px;
  	  	width:44%;
  	  	margin: auto;
  	  	background-color: rgba(255,255,255,.3);
  	  }
  	  #bottom span{
  	  	float: left;
  	  	width:20px;
  	  	height:20px;
  	  	margin:0 6px;
  	  	border-radius: 50%;
  	  	background-color: rgba(0,0,0,.2);
  	  	cursor: pointer;
  	  }
  	  #bottom .on{
  	  	position: absolute;
  	  	background-color: red;
  	  }
  </style>
</head>
<body>
    <div class="banner">
    	<ul class="ImgList">
    		<li>
    			<img src="images/8.webp">
    		</li>
    		<li>
    			<img src="images/1.webp">
    		</li>
    		<li>
    			<img src="images/2.webp">
    		</li>
    		<li>
    			<img src="images/3.webp">
    		</li>
    		<li>
    			<img src="images/4.webp">
    		</li>
    		<li>
    			<img src="images/5.webp">
    		</li>
    		<li>
    			<img src="images/6.webp">
    		</li>
    		<li>
    			<img src="images/7.jpg">
    		</li>
    		<li>
    			<img src="images/8.webp">
    		</li>
    		<li>
    			<img src="images/1.webp">
    		</li>
    	</ul>
    	<div class="btn">
    		<div class="btn_left">&lt;</div>
    		<div class="btn_right">&gt;</div>
    	</div>
    	<div id="bottom">
    		<span class="on"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    		<span class="span"></span>
    	</div>
    </div>
    <script src="js/animation.js"></script>
    <script>
    	var oUl = document.getElementsByClassName('ImgList')[0];//获取oUl元素
    	var BtnLeft = document.getElementsByClassName('btn_right')[0];//获取BtnLeft元素
    	var BtnRight = document.getElementsByClassName('btn_left')[0];//获取BtnRight元素
    	var On = document.getElementsByClassName('on')[0];//获取On元素
    	var Bottom = document.getElementById('bottom');//获取Bottom元素
    	var oSpan = document.getElementsByClassName('span');//获取oSpan元素
    	var w = 590;//存储一张图片的宽度值
    	var index = 0;//存储图片和圆点的点击次数
    	var len = oUl.children.length-2;//获取轮播所用的图片length长度
    	oUl.style.left = -w + "px";//让oUl恢复到最初始的位置

    	/*
    	  index和oUl的点击关系
    	    0     -590
    	    1     -590*2
    	    2     -590*3
    	    3     -590*4
    	    index -590*(index+1)

    	  index和On的点击关系
    	    0     0
    	    1     32
    	    2     32*2
    	    3     32*3
    	    4     32*4
    	    index 32*index
    	*/
    	//让图片的小红球向右移动
    	var now = new Date();//获取当前时间
    	BtnLeft.addEventListener('click',function(){
    		if(new Date - now <300) return;//如果小于300毫秒那么就抛出，执行以下代码
    		now = new Date();//强制等于当前时间
    		index ++;//每点击一次正加一次点击

    		//让oUl向右移动
    		animation(oUl,{
               left:-w*(index+1),
    		},0.3,function(){//此回调函数是让所用轮播的图片回到第一张所需轮播的图片
    			if (index==len) {
    				index = 0;//强制index等于第一张所需轮播的图片length
    				this.style.left = -w + "px";
    			}
    		})

    		//让On向右移动
    		if (index==len) {//如果点击次数等len那么执行以下代码
    			animation(On,{//淡入出去
    				left:260,
    				opacity:0,
    			},0.3,function(){//淡出归来
    				this.style.left = -30 + "px";//淡出归来的距离
    				animation(On,{
    					left:0,
    					opacity:1,
    				},0.3)
    			})
    		}else {//正常移动On
    			animation(On,{
    			   left:32*index,
    		    },0.3)
    		}
    	},false)

    	//让图片的小红圆点向左移动
    	BtnRight.addEventListener('click',function(){
    		if(new Date - now <300) return;//如果小于300毫秒那么就抛出，执行以下代码
    		now = new Date();//强制等于当前时间
    		index --;//点击一次减少一次所需轮播的length长度
    		animation(oUl,{//让oUl向左移动
    			left:-w*(index+1),
    		},0.3,function(){//此回调函数是让所用轮播的图片回到最后一张所需轮播的图片
    			if (index==-1) {
    				index = len-1;//强制index等于最后张一张所需轮播的图片length
    				this.style.left = -len*w+"px";
    			}
    		})

    		if (index==-1) {//如果满足添加那么执行以下代码
    			animation(On,{//淡出出去
    				left:-40,
    				opacity:0,
    			},0.3,function(){//淡入归来
    				this.style.left = 265 + "px";//淡出归来的距离
    				animation(On,{
    					left:224,
    					opacity:1,
    				},0.3)
    			})
    		}else {//正常移动On
    			animation(On,{
    			   left:32*index,
    		    },0.3)
    		}
    	},false)

    	for(var i=0;i<oSpan.length;i++){
    		oSpan[i].index = i;//自定义index属性
    	}

    	Bottom.addEventListener('click',function(e){
    		index = e.target.index;//给index赋值
    		if (e.target.nodeName==="SPAN") {
    			animation(oUl,{//点击小圆点让图片切换
    			   left:-w*(index+1),
    		    },0.3)
    		    animation(On,{//点击小圆点让小圆点切换
    			   left:32*index,
    		    },0.3)
    		}
    	},false)
    </script>
</body>
</html>