<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <button>点击按钮获取数据</button>
    <script>
        //使用回调函数封装ajax方法
        function myajax(method,url,next){
            var xhr = new XMLHttpRequest();
            xhr.open(method,url);
            xhr.send();
            xhr.onreadystatechange = function (){
                if(xhr.readyState === 4 && xhr.status === 200){//这里的4是readystate的一种状态
                    next(xhr.responseText);//回调xhr.responseText是后台处理过的字符串
                }
            }
        }

        /*
            xhr.readystate === 4是readyState的一种状态readyState一共有五种状态
            
            0：请求未初始化，还没有调用 open()。
            1：请求已经建立，但是还没有发送，还没有调用 send()。
            2：请求已发送，正在处理中（正常情况下现在可以从响应中获取内容头）。
            3：请求在处理中；通常响应中已有部分数据可用了，还未全部完成。
            4：响应已完成；您可以获取并使用服务器的响应了。
        */

        document.querySelector("button").onclick = function(){//调研封装的ajax
            //不能使用return获取异步数据
            myajax("get","http://jsonplaceholder.typicode.com/posts",function(data){
                console.log(data);
            })
        }
    </script>
</body>
</html>